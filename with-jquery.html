<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name=viewport content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
	<link href="./global.css" rel="stylesheet" type="text/css">
	<title>Lethargy demo</title>
</head>
<body>
	<div class="content">
		<h1>Lethargy Demo</h1>
		<p class="cta">Start scrolling!</p>
		<p>Starts off as <span class="inactive">gray</span>, <span class="active">green</span> indicates scroll event, <span class="inertial">red</span> when the event is blocked.</p>
		<p>If you scroll with your mouse or trackpad, you'll see a brief flash of green, and then red. This is how lethargy works - each scroll <em>intent</em> is meant to fire only one block of events.</p>
		<div class="indicator"></div>
		<p><small>(Open up your console to see each data point!)</small></p>
		<a href="https://github.com/d4nyll/lethargy" target="_blank">GitHub</a>, <a href="http://blog.danyll.com/lethargy-tackling-inertial-scroll/" target="_blank">Blog</a>
	</div>
	<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<script src="./lethargy.min.js"></script>
	<script>
		(function() {
			$('.indicator').css("background-color", "gray");
			var lethargy = new Lethargy();

			// Bind all mousewheel events and pass it to Lethargy.check()
			$(window).bind('mousewheel DOMMouseScroll wheel MozMousePixelScroll', function(e){
				e.preventDefault()
				e.stopPropagation();

				// Lethargy.check() must only be called once per mouse event
				// If you need to use the result in more than one place
				// you MUST store it as a variable and use that variable instead
				// See https://github.com/d4nyll/lethargy/issues/5
				var result = lethargy.check(e);

				// false means it's not a scroll intent, 1 or -1 means it is
				console.log(result);
				if(result !== false) {
					$('.indicator').css("background-color", "#1AB742");
				} else {
					$('.indicator').css("background-color", "#E8305D");
				}
			});
		})();
	</script>
</body>
</html>